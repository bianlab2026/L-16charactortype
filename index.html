<!doctype html>
<html lang="ja" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lã‚­ãƒ£ãƒ©ã‚¿ã‚¤ãƒ—è¨ºæ–­</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;500;700&amp;family=Cormorant+Garamond:wght@400;600&amp;display=swap" rel="stylesheet">
  
	 
	 
	 
	 <style>
    body {
      box-sizing: border-box;
    }
    
    * {
      font-family: 'Zen Maru Gothic', sans-serif;
    }
    
    .title-font {
      font-family: 'Cormorant Garamond', serif;
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(-20px) rotate(5deg); }
    }
    
    @keyframes float-reverse {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(-15px) rotate(-5deg); }
    }
    
    @keyframes pulse-glow {
      0%, 100% { opacity: 0.6; transform: scale(1); }
      50% { opacity: 1; transform: scale(1.05); }
    }
    
    @keyframes shimmer {
      0% { background-position: -200% center; }
      100% { background-position: 200% center; }
    }
    
    .floating-element {
      animation: float 6s ease-in-out infinite;
    }
    
    .floating-element-reverse {
      animation: float-reverse 5s ease-in-out infinite;
    }
    
    .floating-element-slow {
      animation: float 8s ease-in-out infinite;
    }
    
    .pulse-glow {
      animation: pulse-glow 3s ease-in-out infinite;
    }
    
    .shimmer-text {
      background: linear-gradient(90deg, var(--primary-color) 0%, #fff 50%, var(--primary-color) 100%);
      background-size: 200% auto;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: shimmer 3s linear infinite;
    }
    
    .heart-button {
      position: relative;
      width: 60px;
      height: 54px;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .heart-button:hover {
      transform: scale(1.15);
    }
    
    .heart-button.selected {
      transform: scale(1.2);
    }
    
    .heart-shape {
      position: absolute;
      width: 100%;
      height: 100%;
    }
    
    .progress-bar {
      background: linear-gradient(90deg, #ff6b9d, #c084fc, #ff6b9d);
      background-size: 200% 100%;
      animation: shimmer 2s linear infinite;
    }
    
    .card-glow {
      box-shadow: 0 0 40px rgba(255, 107, 157, 0.3), 0 0 80px rgba(192, 132, 252, 0.2);
    }
    
    .result-card {
      background: linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(255,240,245,0.95) 100%);
      backdrop-filter: blur(10px);
    }
    
    .type-badge {
      background: linear-gradient(135deg, #ff6b9d 0%, #c084fc 100%);
    }
    
    .share-button {
      transition: all 0.3s ease;
    }
    
    .share-button:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 20px rgba(0,0,0,0.15);
    }
    
    .compatibility-card {
      transition: all 0.3s ease;
    }
    
    .compatibility-card:hover {
      transform: translateY(-5px);
    }

    .screen {
      display: none;
      opacity: 0;
      transition: opacity 0.5s ease;
    }
    
    .screen.active {
      display: flex;
      opacity: 1;
    }
    
    .fade-in {
      animation: fadeIn 0.5s ease forwards;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full overflow-auto">
  <div id="app-container" class="min-h-full w-full relative overflow-hidden" style="background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f0f23 100%);"><!-- Floating Background Elements -->
   <div id="floating-bg" class="absolute inset-0 overflow-hidden pointer-events-none">
    <div class="floating-element absolute top-10 left-10 w-20 h-20 opacity-30">
     <svg viewbox="0 0 100 100" fill="none"><path d="M50 90C50 90 90 60 90 35C90 15 75 5 50 25C25 5 10 15 10 35C10 60 50 90 50 90Z" fill="#ff6b9d" />
     </svg>
    </div>
    <div class="floating-element-reverse absolute top-32 right-20 w-16 h-16 opacity-25">
     <svg viewbox="0 0 100 100" fill="none"><path d="M50 90C50 90 90 60 90 35C90 15 75 5 50 25C25 5 10 15 10 35C10 60 50 90 50 90Z" fill="#c084fc" />
     </svg>
    </div>
    <div class="floating-element-slow absolute bottom-40 left-20 w-24 h-24 opacity-20">
     <svg viewbox="0 0 100 100" fill="none"><path d="M50 90C50 90 90 60 90 35C90 15 75 5 50 25C25 5 10 15 10 35C10 60 50 90 50 90Z" fill="#f472b6" />
     </svg>
    </div>
    <div class="floating-element absolute bottom-20 right-10 w-14 h-14 opacity-35">
     <svg viewbox="0 0 100 100" fill="none"><path d="M50 90C50 90 90 60 90 35C90 15 75 5 50 25C25 5 10 15 10 35C10 60 50 90 50 90Z" fill="#a78bfa" />
     </svg>
    </div>
    <div class="floating-element-reverse absolute top-1/2 left-5 w-12 h-12 opacity-25">
     <svg viewbox="0 0 100 100" fill="none"><path d="M50 90C50 90 90 60 90 35C90 15 75 5 50 25C25 5 10 15 10 35C10 60 50 90 50 90Z" fill="#ff6b9d" />
     </svg>
    </div>
    <div class="floating-element-slow absolute top-20 left-1/3 w-10 h-10 opacity-20">
     <svg viewbox="0 0 100 100" fill="none"><path d="M50 90C50 90 90 60 90 35C90 15 75 5 50 25C25 5 10 15 10 35C10 60 50 90 50 90Z" fill="#e879f9" />
     </svg>
    </div>
   </div><!-- Screen 1: Start Screen -->
   <div id="start-screen" class="screen active flex-col items-center justify-center min-h-full w-full px-4 py-8 relative z-10">
    <div class="text-center max-w-lg mx-auto"><!-- Main Illustration Placeholder -->
     <div class="mb-8 relative">
      <div class="w-48 h-48 mx-auto rounded-full bg-gradient-to-br from-pink-400/30 to-purple-500/30 flex items-center justify-center card-glow pulse-glow">
       <div id="main-illustration" class="w-40 h-40 rounded-full bg-gradient-to-br from-pink-300/50 to-purple-400/50 flex items-center justify-center text-6xl">
        ğŸ’˜
       </div>
      </div>
      <div class="absolute -top-2 -right-2 text-4xl floating-element">
       âœ¨
      </div>
      <div class="absolute -bottom-2 -left-2 text-3xl floating-element-reverse">
       ğŸ’«
      </div>
     </div><!-- Title -->
     <h1 id="main-title" class="text-4xl md:text-5xl font-bold text-white mb-3 title-font tracking-wider" style="text-shadow: 0 0 30px rgba(255,107,157,0.5);">ğŸ’˜Lã‚­ãƒ£ãƒ©ã‚¿ã‚¤ãƒ—è¨ºæ–­</h1>
     <p id="subtitle" class="text-pink-200/80 text-lg mb-8">16ã‚¿ã‚¤ãƒ—ã«åˆ†ã‹ã‚Œã‚‹ãƒ¬ã‚ºãƒ“ã‚¢ãƒ³ã®ãŸã‚ã®è¨ºæ–­ãƒ„ãƒ¼ãƒ«</p><!-- Start Button --> <button id="start-button" onclick="startQuiz()" class="relative group">
      <div class="absolute inset-0 bg-gradient-to-r from-pink-500 to-purple-500 rounded-full blur-lg opacity-70 group-hover:opacity-100 transition-opacity"></div>
      <div class="relative px-12 py-4 bg-gradient-to-r from-pink-500 to-purple-500 rounded-full text-white text-xl font-bold shadow-2xl transform transition-all group-hover:scale-105 group-hover:shadow-pink-500/50"><span id="start-button-text">è¨ºæ–­ã‚’ã¯ã˜ã‚ã‚‹</span> <span class="ml-2">â†’</span>
      </div></button>
     <p class="text-pink-300/50 text-sm mt-6">å…¨12å•ãƒ»ç´„3åˆ†</p>
    </div>
   </div><!-- Screen 2: Question Screen -->
   <div id="question-screen" class="screen flex-col items-center justify-start min-h-full w-full px-4 py-6 relative z-10">
    <div class="w-full max-w-2xl mx-auto"><!-- Progress Bar -->
     <div class="mb-6">
      <div class="flex justify-between text-pink-200/80 text-sm mb-2"><span id="progress-text">1 / 12</span> <span id="progress-percent">8%</span>
      </div>
      <div class="h-2 bg-white/10 rounded-full overflow-hidden">
       <div id="progress-bar" class="progress-bar h-full rounded-full transition-all duration-500" style="width: 8%"></div>
      </div>
     </div><!-- Question Card -->
     <div class="bg-white/10 backdrop-blur-md rounded-3xl p-6 md:p-8 card-glow">
      <div id="question-category" class="text-pink-300 text-sm mb-2 tracking-wider">
       T/C ã‚¿ã‚¤ãƒ—
      </div>
      <h2 id="question-text" class="text-white text-xl md:text-2xl font-bold mb-8 leading-relaxed">å¤œã®ãƒã‚¸ã‚·ãƒ§ãƒ³ã®é¡˜æœ›ã¯ï¼Ÿ</h2><!-- Answer Options (5 Heart Buttons) -->
      <div class="flex flex-col items-center gap-4">
       <div class="flex justify-between items-center w-full max-w-md"><span id="option-left" class="text-pink-200 text-sm md:text-base font-medium">æ”»ã‚ãŸã„</span> <span id="option-right" class="text-purple-200 text-sm md:text-base font-medium">æ”»ã‚ã‚‰ã‚ŒãŸã„</span>
       </div>
       <div class="flex justify-center items-center gap-3 md:gap-6"><!-- Heart Button 1 (Strong Left) --> <button class="heart-button answer-btn" data-value="2" onclick="selectAnswer(2)">
         <svg class="heart-shape" viewbox="0 0 100 90"><path d="M50 85C50 85 90 55 90 30C90 10 75 0 50 20C25 0 10 10 10 30C10 55 50 85 50 85Z" fill="#ff6b9d" stroke="#fff" stroke-width="2" />
         </svg><span class="absolute inset-0 flex items-center justify-center text-white font-bold text-lg pt-1">â†â†</span> </button> <!-- Heart Button 2 (Slight Left) --> <button class="heart-button answer-btn" data-value="1" onclick="selectAnswer(1)">
         <svg class="heart-shape" viewbox="0 0 100 90"><path d="M50 85C50 85 90 55 90 30C90 10 75 0 50 20C25 0 10 10 10 30C10 55 50 85 50 85Z" fill="#f9a8c9" stroke="#fff" stroke-width="2" />
         </svg><span class="absolute inset-0 flex items-center justify-center text-white font-bold text-lg pt-1">â†</span> </button> <!-- Heart Button 3 (Neutral) --> <button class="heart-button answer-btn" data-value="0" onclick="selectAnswer(0)">
         <svg class="heart-shape" viewbox="0 0 100 90"><path d="M50 85C50 85 90 55 90 30C90 10 75 0 50 20C25 0 10 10 10 30C10 55 50 85 50 85Z" fill="#d8b4fe" stroke="#fff" stroke-width="2" />
         </svg><span class="absolute inset-0 flex items-center justify-center text-white font-bold text-lg pt-1">â€¢</span> </button> <!-- Heart Button 4 (Slight Right) --> <button class="heart-button answer-btn" data-value="-1" onclick="selectAnswer(-1)">
         <svg class="heart-shape" viewbox="0 0 100 90"><path d="M50 85C50 85 90 55 90 30C90 10 75 0 50 20C25 0 10 10 10 30C10 55 50 85 50 85Z" fill="#c4b5fd" stroke="#fff" stroke-width="2" />
         </svg><span class="absolute inset-0 flex items-center justify-center text-white font-bold text-lg pt-1">â†’</span> </button> <!-- Heart Button 5 (Strong Right) --> <button class="heart-button answer-btn" data-value="-2" onclick="selectAnswer(-2)">
         <svg class="heart-shape" viewbox="0 0 100 90"><path d="M50 85C50 85 90 55 90 30C90 10 75 0 50 20C25 0 10 10 10 30C10 55 50 85 50 85Z" fill="#a78bfa" stroke="#fff" stroke-width="2" />
         </svg><span class="absolute inset-0 flex items-center justify-center text-white font-bold text-lg pt-1">â†’â†’</span> </button>
       </div>
      </div>
     </div>
    </div>
   </div><!-- Screen 3: Result Screen -->
   <div id="result-screen" class="screen flex-col items-center justify-start min-h-full w-full px-4 py-6 relative z-10 overflow-y-auto">
    <div class="w-full max-w-2xl mx-auto"><!-- Result Card -->
     <div class="result-card rounded-3xl p-6 md:p-8 card-glow mb-6 fade-in"><!-- Type Badge -->
      <div class="text-center mb-6">
       <div id="result-suit" class="text-5xl mb-2">
        â¤ï¸
       </div>
       <div class="type-badge inline-block px-4 py-1 rounded-full text-white text-sm font-bold mb-3"><span id="result-code">TPLO</span>
       </div>
       <h2 class="text-3xl md:text-4xl font-bold text-gray-800 mb-2">ã‚ãªãŸã¯<br><span id="result-name" class="text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500">ãƒ€ãƒ¼ã‚¯ã‚¯ã‚¤ãƒ¼ãƒ³</span><br>
         ã‚¿ã‚¤ãƒ—ï¼</h2>
      </div><!-- Character Illustration -->
      <div class="w-40 h-40 mx-auto mb-6 rounded-full bg-gradient-to-br from-pink-200 to-purple-200 flex items-center justify-center text-6xl shadow-lg"><span id="result-emoji">ğŸ‘‘</span>
      </div><!-- Description -->
      <div id="result-description" class="text-gray-600 leading-relaxed text-center mb-6 px-2">
       æ‹æ„›ã§ã¯å¼·æ°—ã§ãƒªãƒ¼ãƒ‰ã™ã‚‹ã“ã¨ãŒå¤šãã€è‡ªåˆ†ã®ãƒ«ãƒ¼ãƒ«ã«å¾“ã£ã¦å‹•ãã“ã¨ã‚’å¥½ã¿ã¾ã™ã€‚
      </div>
     </div><!-- Compatibility Section -->
     <div class="bg-white/10 backdrop-blur-md rounded-3xl p-6 mb-6 fade-in" style="animation-delay: 0.2s">
      <h3 class="text-white text-xl font-bold mb-4 text-center">ğŸ’• ç›¸æ€§è¨ºæ–­</h3><!-- Good Match -->
      <div class="mb-4">
       <div class="text-pink-300 text-sm mb-2 flex items-center gap-2"><span>âœ¨</span> ã‚°ãƒƒãƒ‰ãƒãƒƒãƒ
       </div>
       <div class="grid grid-cols-2 gap-3" id="good-match-container">
        <div class="compatibility-card bg-gradient-to-br from-pink-500/20 to-purple-500/20 rounded-xl p-4 text-center">
         <div class="text-2xl mb-1" id="good-match-1-emoji">
          ğŸ‘¸
         </div>
         <div class="text-white font-bold text-sm" id="good-match-1-name">
          ã‚­ãƒ³ã‚°ãƒãƒ 
         </div>
         <div class="text-pink-200 text-xs" id="good-match-1-code">
          TKLO
         </div>
        </div>
        <div class="compatibility-card bg-gradient-to-br from-pink-500/20 to-purple-500/20 rounded-xl p-4 text-center">
         <div class="text-2xl mb-1" id="good-match-2-emoji">
          ğŸ­
         </div>
         <div class="text-white font-bold text-sm" id="good-match-2-name">
          ã‚¨ãƒªãƒ¼ãƒˆãƒãƒˆãƒ©ãƒ¼
         </div>
         <div class="text-pink-200 text-xs" id="good-match-2-code">
          TKGO
         </div>
        </div>
       </div>
      </div><!-- Bad Match -->
      <div>
       <div class="text-purple-300 text-sm mb-2 flex items-center gap-2"><span>ğŸ’”</span> è¦æ³¨æ„ãƒãƒƒãƒ
       </div>
       <div class="compatibility-card bg-gradient-to-br from-gray-500/20 to-gray-600/20 rounded-xl p-4 text-center max-w-xs mx-auto">
        <div class="text-2xl mb-1" id="bad-match-emoji">
         ğŸ¦Š
        </div>
        <div class="text-white font-bold text-sm" id="bad-match-name">
         ãƒ’ãƒ¼ãƒ­ãƒ¼ãƒ©ãƒ“ãƒƒãƒˆ
        </div>
        <div class="text-gray-300 text-xs" id="bad-match-code">
         TPGO
        </div>
       </div>
      </div>
     </div><!-- Share Section -->
     <div class="bg-white/10 backdrop-blur-md rounded-3xl p-6 mb-6 fade-in" style="animation-delay: 0.4s">
      <h3 class="text-white text-xl font-bold mb-4 text-center">ğŸ“¤ çµæœã‚’ã‚·ã‚§ã‚¢</h3>
      <div class="flex flex-col sm:flex-row gap-3 justify-center"><button onclick="copyLink()" class="share-button flex items-center justify-center gap-2 px-5 py-3 bg-gradient-to-r from-gray-600 to-gray-700 rounded-full text-white font-medium">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
        </svg> ãƒªãƒ³ã‚¯ã‚’ã‚³ãƒ”ãƒ¼ </button> <button onclick="shareToLine()" class="share-button flex items-center justify-center gap-2 px-5 py-3 bg-gradient-to-r from-green-500 to-green-600 rounded-full text-white font-medium">
        <svg class="w-5 h-5" viewbox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 5.88 2 10.54c0 2.95 1.56 5.54 4 7.13V22l3.77-2.06c.73.13 1.48.2 2.23.2 5.52 0 10-3.88 10-8.6C22 5.88 17.52 2 12 2z" />
        </svg> LINEã§ã‚·ã‚§ã‚¢ </button> <button onclick="shareToX()" class="share-button flex items-center justify-center gap-2 px-5 py-3 bg-gradient-to-r from-gray-800 to-black rounded-full text-white font-medium">
        <svg class="w-5 h-5" viewbox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z" />
        </svg> Xã§ã‚·ã‚§ã‚¢ </button>
      </div>
     </div><!-- Retry Button -->
     <div class="text-center fade-in" style="animation-delay: 0.6s"><button onclick="restartQuiz()" class="group relative">
       <div class="absolute inset-0 bg-gradient-to-r from-pink-500 to-purple-500 rounded-full blur-lg opacity-50 group-hover:opacity-70 transition-opacity"></div>
       <div class="relative px-8 py-3 bg-white/10 backdrop-blur-md border-2 border-pink-400/50 rounded-full text-white font-bold transform transition-all group-hover:scale-105">
        ğŸ”„ ã‚‚ã†ä¸€åº¦è¨ºæ–­ã™ã‚‹
       </div></button>
     </div>
    </div>
   </div>
  </div>
  <script>
    // Character Types Data
    const characterTypes = {
      'TPLO': { name: 'ãƒ€ãƒ¼ã‚¯ã‚¯ã‚¤ãƒ¼ãƒ³', suit: 'â¤ï¸', emoji: 'ğŸ‘‘', group: 'PL',
        description: 'æ‹æ„›ã§ã¯å¼·æ°—ã§ãƒªãƒ¼ãƒ‰ã™ã‚‹ã“ã¨ãŒå¤šãã€è‡ªåˆ†ã®ãƒ«ãƒ¼ãƒ«ã«å¾“ã£ã¦å‹•ãã“ã¨ã‚’å¥½ã¿ã¾ã™ã€‚ç›¸æ‰‹ã‚’å¼•ãã¤ã‘ã‚‹ã‚«ãƒªã‚¹ãƒæ€§ãŒã‚ã‚Šã¾ã™ãŒã€ã¨ãã«ç‹¬å çš„ã«ãªã‚Šã™ãã‚‹ã“ã¨ã‚‚ã€‚æ„Ÿæƒ…è¡¨ç¾ã¯è±Šã‹ã§ã€æƒ…ç†±çš„ã«æ‹ã«å‘ãåˆã„ã¾ã™ã€‚æ”¯é…çš„ã§ã‚ã‚ŠãªãŒã‚‰ã‚‚ã€ä¿¡é ¼é–¢ä¿‚ã‚’å¤§åˆ‡ã«ã™ã‚‹ä¸€é€”ãªä¸€é¢ãŒã‚ã‚Šã¾ã™ã€‚' },
      'TPLS': { name: 'ã‚­ãƒ£ãƒªã‚¢ã‚¦ãƒ¼ãƒãƒ³', suit: 'â¤ï¸', emoji: 'ğŸ’¼', group: 'PL',
        description: 'æ‹æ„›ã¯åŠ¹ç‡é‡è¦–ã§è¨ˆç”»çš„ã«å‹•ãã‚¿ã‚¤ãƒ—ã§ã™ã€‚è‡ªç«‹å¿ƒãŒå¼·ãã€ç›¸æ‰‹ã«é ¼ã‚‹ã‚ˆã‚Šã‚‚è‡ªåˆ†ã§è§£æ±ºã™ã‚‹ã“ã¨ã‚’å¥½ã¿ã¾ã™ã€‚ã—ã‹ã—å¿ƒã®å¥¥ã§ã¯ç”˜ãˆãŸã„æ°—æŒã¡ã‚‚æŒã£ã¦ãŠã‚Šã€ä¿¡é ¼ã§ãã‚‹ç›¸æ‰‹ã«ã¯è¦‹ã›ã‚‹ã“ã¨ã‚‚ã€‚æ‹ã®é§†ã‘å¼•ãã‚ˆã‚Šã‚‚ã€ç€å®Ÿãªé–¢ä¿‚ã‚’ç¯‰ãã“ã¨ã‚’å¤§åˆ‡ã«ã—ã¾ã™ã€‚' },
      'CPLO': { name: 'ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼', suit: 'â¤ï¸', emoji: 'ğŸ‘—', group: 'PL',
        description: 'æ„Ÿè¦šã§åˆ¤æ–­ã™ã‚‹ã“ã¨ãŒå¤šãè‡ªåˆ†ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’è²«ãã‚¿ã‚¤ãƒ—ã§ã™ã€‚ã—ã‹ã—ã€è‡ªä¿¡ãŒãªã„ã¨ã“ã‚ã‚‚ã‚ã‚‹ãŸã‚ä»–è€…ã«èªã‚ã‚‰ã‚Œã‚‹ã“ã¨ã‚’å®Ÿã¯æœ›ã‚“ã§ã„ã¾ã™ã€‚è‡ªç”±ã§æ˜ã‚‹ã„é›°å›²æ°—ã‚’æŒã¡ã€ä»–è€…ã¨æ‰“ã¡è§£ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚æ‹æ„›ã§ã¯è‡ªåˆ†ã®å€‹æ€§ã‚’å¤§åˆ‡ã«ã—ã¤ã¤ã€ã‚¹ãƒˆãƒ¬ã‚¹ã®ãªã„é–¢ä¿‚ã‚’å¥½ã¿ã¾ã™ã€‚' },
      'CPLS': { name: 'ãƒˆãƒ¬ãƒ³ãƒ‰ãƒ©ã‚¤ãƒ€ãƒ¼', suit: 'â¤ï¸', emoji: 'ğŸª', group: 'PL',
        description: 'æµè¡Œã‚„å†’é™ºã‚’æ¥½ã—ã‚€ã‚¿ã‚¤ãƒ—ã§ã€æ‹æ„›ã«ã‚‚è‡ªç”±ãªã‚¹ã‚¿ãƒ³ã‚¹ã‚’æŒã¡ã¾ã™ã€‚ç¸›ã‚‰ã‚Œã‚‹ã‚ˆã‚Šã‚‚è»½ã‚„ã‹ã§æŸ”è»Ÿãªé–¢ä¿‚ã‚’å¥½ã¿ã¾ã™ã€‚æ–°ã—ã„ã“ã¨ã«æŒ‘æˆ¦ã™ã‚‹å‹‡æ°—ãŒã‚ã‚Šã€æ‹ã‚‚è‡ªåˆ†ã‚‰ã—ãæ¥½ã—ã‚€ã“ã¨ãŒã§ãã¾ã™ã€‚å¿ƒã®å¥¥ã§ã¯èª å®Ÿã•ã‚’æŒã£ã¦ãŠã‚Šã€å¤§åˆ‡ãªäººã«ã¯çœŸæ‘¯ã«å‘ãåˆã„ã¾ã™ã€‚' },
      'TPGO': { name: 'ãƒ’ãƒ¼ãƒ­ãƒ¼ãƒ©ãƒ“ãƒƒãƒˆ', suit: 'ğŸŸ¡', emoji: 'ğŸ°', group: 'PG',
        description: 'æ‹æ„›ã§ã¯ç©æ¥µçš„ã«è¡Œå‹•ã—ã€ç›¸æ‰‹ã‚’å¼•ã£å¼µã‚‹ã“ã¨ã‚’å¥½ã‚€ã‚¿ã‚¤ãƒ—ã§ã™ã€‚è‡ªåˆ†ã®æ€ã„ã‚’ç´ ç›´ã«è¡¨ç¾ã—ã€ã‚ªãƒ¼ãƒ—ãƒ³ã«æ‹æ„›ã‚’æ¥½ã—ã‚€ã“ã¨ãŒã§ãã¾ã™ã€‚ã‚¹ãƒãƒ¼ãƒ†ã‚£ãƒ¼ãªä¸€é¢ã‚‚ã‚ã‚Šã€ç›¸æ‰‹ã«ãƒ¯ã‚¯ãƒ¯ã‚¯ã‚„æƒ…ç†±ã‚’ä¸ãˆã¾ã™ã€‚å‘¨å›²ã‚’å·»ãè¾¼ã¿ãªãŒã‚‰ã€æ˜ã‚‹ãå‰å‘ããªé–¢ä¿‚ã‚’ç¯‰ãã®ãŒç†æƒ³ã§ã™ã€‚' },
      'TPGS': { name: 'ã‚¬ãƒ©ã‚¹ãƒ—ãƒªãƒ³ã‚¹', suit: 'ğŸŸ¡', emoji: 'ğŸª', group: 'PG',
        description: 'å¤–è¦‹ã¯è‡ªä¿¡ã«æº€ã¡ã¦ã„ã¾ã™ãŒã€å†…é¢ã§ã¯æ…é‡ã§æ§ãˆã‚ãªé¢ã‚’ãŠæŒã¡ã§ã™ã€‚æ‹æ„›ã§ã¯ç§˜å¯†ä¸»ç¾©ã§ã€ç›¸æ‰‹ã«å…¨ã¦ã‚’ã•ã‚‰ã‘å‡ºã™ã“ã¨ã¯å°‘ãªã„ã§ã—ã‚‡ã†ã€‚ãƒ­ãƒãƒ³ãƒãƒƒã‚¯ãªæ€§æ ¼ã§ã‚ã‚Šã€ç”˜ãˆã‚‹ã“ã¨ã‚’è¨±ã—ã¦ãã‚Œã‚‹ç›¸æ‰‹ã‚’æœ›ã¿ã¾ã™ã€‚ãã®ç¹Šç´°ã•ã‚„ãƒŸã‚¹ãƒ†ãƒªã‚¢ã‚¹ãªé›°å›²æ°—ãŒã€å‘¨å›²ã®èˆˆå‘³ã‚’å¼•ãã¤ã‘ã¾ã™ã€‚' },
      'CPGO': { name: 'ãƒªãƒˆãƒ«ãƒ–ãƒ©ã‚¶ãƒ¼', suit: 'ğŸŸ¡', emoji: 'ğŸ§¸', group: 'PG',
        description: 'æ‹æ„›ã§ã¯ç”˜ãˆä¸Šæ‰‹ã§å¯æ„›ã‚‰ã—ã„å°è±¡ã‚’ä¸ãˆã‚‰ã‚Œã‚‹ã‚¿ã‚¤ãƒ—ã§ã™ã€‚è‡ªåˆ†è»¸ãªé¢ã‚‚ã‚ã‚Šã€è‡ªåˆ†ã®ä»Šã®æ€ã„ã‚„æ„Ÿæƒ…ã‚’å¤§åˆ‡ã«ã—ã¾ã™ã€‚ã‚ªãƒ¼ãƒ—ãƒ³ãªæ€§æ ¼ã§ã€äººæ‡ã£ã“ãå‘¨å›²ã¨ã™ãã«æ‰“ã¡è§£ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚æŸ”ã‚‰ã‹ãæ„›ã•ã‚Œã‚‹é­…åŠ›ãŒã‚ã‚Šã€å®ˆã£ã¦ã‚ã’ãŸããªã‚‹å­˜åœ¨ã¨ãªã‚‹ã§ã—ã‚‡ã†ã€‚' },
      'CPGS': { name: 'ã‚ªãƒ•ã‚£ã‚¹DJ', suit: 'ğŸŸ¡', emoji: 'ğŸ§', group: 'PG',
        description: 'æ§ãˆã‚ã§å†…å‘çš„ã§ã™ãŒã€æ‹æ„›ã§ã¯ç›¸æ‰‹ã‚’å¤§åˆ‡ã«æ€ã†å„ªã—ã•ãŒã‚ã‚Šã¾ã™ã€‚ç§˜å¯†ä¸»ç¾©ãªé¢ãŒã‚ã‚Šã€å…¨ã¦ã‚’ã™ãã«è¦‹ã›ã‚‹ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚æ…é‡æ´¾ãªæ€§æ ¼ã§ã™ãŒã€æ™‚ã€…å‘¨ã‚Šã‚’é©šã‹ã›ã‚‹è¡Œå‹•ã‚„è¨€å‹•ãŒã‚ã‚Šã¾ã™ã€‚é™ã‹ã§è½ã¡ç€ã„ãŸé­…åŠ›ãŒã‚ã‚Šã€éš ã‚ŒãŸé­…åŠ›ã§ç›¸æ‰‹ã‚’æƒ¹ãã¤ã‘ã‚‰ã‚Œã¾ã™ã€‚' },
      'TKLO': { name: 'ã‚­ãƒ³ã‚°ãƒãƒ ', suit: 'â˜˜ï¸', emoji: 'ğŸ‘¸', group: 'KL',
        description: 'æ‹æ„›ã§ã¯é ¼ã‚Œã‚‹å­˜åœ¨ã¨ã—ã¦ã€ç›¸æ‰‹ã‚’åŒ…ã¿è¾¼ã¿æ”¯ãˆã‚‹ã“ã¨ã‚’å¥½ã¾ã‚Œã‚‹ã‚¿ã‚¤ãƒ—ã§ã™ã€‚å¼·ã•ã¨å„ªã—ã•ã‚’å…¼ã­å‚™ãˆã€æ‹äººã«å®‰å¿ƒæ„Ÿã‚’ä¸ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ç›¸æ‰‹ã®æ°—æŒã¡ã«å¯„ã‚Šæ·»ã„ãªãŒã‚‰ã€è‡ªåˆ†ã‚‚æ™‚ã«ç”˜ãˆã‚‹ãƒãƒ©ãƒ³ã‚¹æ„Ÿè¦šã‚’æŒãŸã‚Œã¦ã„ã¾ã™ã€‚å®‰å®šæ„Ÿã¨åŒ…å®¹åŠ›ã®ã‚ã‚‹æ€§æ ¼ãŒã€æ‹æ„›ã«ãŠã„ã¦ã‚‚ä¿¡é ¼ã‚’ç”Ÿã‚€ã§ã—ã‚‡ã†ã€‚' },
      'TKLS': { name: 'ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚¹ãƒ‘ã‚¤', suit: 'â˜˜ï¸', emoji: 'ğŸ•µï¸', group: 'KL',
        description: 'æ‹æ„›ã§ã¯åˆºæ¿€çš„ã§ãƒŸã‚¹ãƒ†ãƒªã‚¢ã‚¹ãªé­…åŠ›ã‚’æ”¾ãŸã‚Œã‚‹ã‚¿ã‚¤ãƒ—ã§ã™ã€‚å¥½å¥‡å¿ƒãŒæ—ºç››ã§ã€æ‹äººã‚’ãƒ‰ã‚­ãƒ‰ã‚­ã•ã›ã‚‹è¡Œå‹•ã‚’å¥½ã¾ã‚Œã¾ã™ã€‚ä¸€è¦‹æ…é‡ã«è¦‹ãˆã¾ã™ãŒã€å†…é¢ã§ã¯æƒ…ç†±ã«æº¢ã‚Œã¦ã„ã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚æ‹æ„›ã«ãŠã‘ã‚‹é§†ã‘å¼•ãã‚„å†’é™ºå¿ƒãŒã€é–¢ä¿‚ã‚’ã‚ˆã‚Šæ·±ãé­…åŠ›çš„ã«ã—ã¾ã™ã€‚' },
      'CKLO': { name: 'ãƒãƒªãƒ³ãƒŸãƒ¥ãƒ¼ã‚º', suit: 'â˜˜ï¸', emoji: 'ğŸ§œ', group: 'KL',
        description: 'æ§ãˆã‚ã§é™ã‹ãªé›°å›²æ°—ã‚’æŒãŸã‚Œã€ç©ã‚„ã‹ãªæ‹æ„›ã‚’å¥½ã¾ã‚Œã‚‹ã‚¿ã‚¤ãƒ—ã§ã™ã€‚ç›¸æ‰‹ã®æ°—æŒã¡ã‚’è¦³å¯Ÿã—ãªãŒã‚‰ã€æ…é‡ã«è·é›¢ã‚’ç¸®ã‚ã‚‰ã‚Œã¾ã™ã€‚å†…é¢ã«ã¯ç§˜ã‚ãŸæƒ…ç†±ãŒã‚ã‚Šã€ä¿¡é ¼é–¢ä¿‚ãŒæ·±ã¾ã‚‹ã¨è‡ªç„¶ã«è¡¨ç¾ã•ã‚Œã¾ã™ã€‚å„ªã—ã•ã¨è½ã¡ç€ãã®ã‚ã‚‹æ€§æ ¼ãŒã€æ‹æ„›ã«ãŠã„ã¦ä¿¡é ¼ã§ãã‚‹å­˜åœ¨ã¨ãªã‚‹ã§ã—ã‚‡ã†ã€‚' },
      'CKLS': { name: 'ãƒ”ã‚¯ã‚·ãƒ¼ã‚¨ãƒ«ãƒ•', suit: 'â˜˜ï¸', emoji: 'ğŸ§š', group: 'KL',
        description: 'å¯æ„›ã‚‰ã—ãã€æ‹æ„›ãã®ã‚‚ã®ã«å¯¾ã™ã‚‹ç†æƒ³ãŒæ˜ç¢ºã«ã‚ã‚‹ã‚¿ã‚¤ãƒ—ã§ã™ã€‚ç›¸æ‰‹ã®ãŸã‚ã«çŒ®èº«çš„ã«è¡Œå‹•ã™ã‚‹å§¿ãŒã€ç›¸æ‰‹ã®æ‹å¿ƒã‚’è‚²ã¦ã¾ã™ã€‚è‡ªåˆ†è‡ªèº«ã‚’å¾Œå›ã—ã«ã—ãŒã¡ãªãŸã‚ã€ç›¸æ‰‹ã‚‚åŒã˜ãã‚‰ã„ã®ç†±é‡ã§å‘ãåˆã£ã¦ãã‚Œã¦ã„ã‚‹ã‹ã‚’é‡è¦–ã—ã¾ã™ã€‚è»½ã‚„ã‹ã§æ„›ã‚‰ã—ã„é­…åŠ›ãŒã€æ‹æ„›é–¢ä¿‚ã«ãŠã„ã¦ç‹¬ç‰¹ã®é­…åŠ›ã‚’ç”Ÿã¿ã¾ã™ã€‚' },
      'TKGO': { name: 'ã‚¨ãƒªãƒ¼ãƒˆãƒãƒˆãƒ©ãƒ¼', suit: 'â™ ï¸', emoji: 'ğŸ­', group: 'KG',
        description: 'æ‹æ„›ã§ã¯ç›¸æ‰‹ã‚’é™°ã§æ”¯ãˆã‚‹ã“ã¨ã«å¹¸ç¦ã‚’æ„Ÿã˜ã‚‹ã‚¿ã‚¤ãƒ—ã§ã™ã€‚ä¸€è¦‹æ§ãˆã‚ã§ç¤¼å„€æ­£ã—ãã€å®‰å®šæ„Ÿã¨å®‰å¿ƒæ„Ÿã‚’æä¾›ã•ã‚Œã¾ã™ã€‚è‡ªåˆ†ã‚’å‰é¢ã«å‡ºã—ã¾ã›ã‚“ãŒã€å†…é¢ã§ã¯ã—ã£ã‹ã‚Šã¨è€ƒãˆã¦ã„ã¾ã™ã€‚èª å®Ÿã§çœŸé¢ç›®ãªæ€§æ ¼ãŒã€ä¿¡é ¼é–¢ä¿‚ã‚’æ·±ã‚ã‚‹å¤§ããªé­…åŠ›ã¨ãªã‚Šã¾ã™ã€‚' },
      'TKGS': { name: 'ãƒ©ãƒ–ãƒœãƒ ', suit: 'â™ ï¸', emoji: 'ğŸ’£', group: 'KG',
        description: 'ãƒŸã‚¹ãƒ†ãƒªã‚¢ã‚¹ã§åˆã‚ã¯ä¸æ€è­°ãªå°è±¡ã§ã™ã€‚é–¢ã‚ã£ã¦ã„ãã»ã©ã«é­…åŠ›ãŒå¢—ã—ã¦ã„ãã€æ‹äººã®ç‰¹æ¨©ã¨è¨€ã‚ã‚Œã‚‹ä¸€é¢ã‚’ãŸã¾ã«è¦‹ã›ã¦ãã‚Œã¾ã™ã€‚ç›¸æ‰‹ã‚’å–œã°ã›ã‚‹ã“ã¨ã«ç†±å¿ƒã§äºŒé¢æ€§ãŒã‚ã‚Šã€åˆºæ¿€çš„ãªé–¢ä¿‚ã‚’ä½œã‚‰ã‚Œã‚‹ã“ã¨ãŒå¤šã„ã§ã—ã‚‡ã†ã€‚æ‹æ„›ã«ãŠã„ã¦ã¯ã€ç‡ç›´ã§åˆ†ã‹ã‚Šã‚„ã™ã„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’å¥½ã¿ã¾ã™ã€‚' },
      'CKGO': { name: 'ã‚½ãƒ•ãƒˆã‚¬ãƒ¼ãƒ‡ã‚£ã‚¢ãƒ³', suit: 'â™ ï¸', emoji: 'ğŸ›¡ï¸', group: 'KG',
        description: 'ç©ã‚„ã‹ã§å„ªã—ãã€æ‹æ„›ã§ã¯ç›¸æ‰‹ã‚’å®‰å¿ƒã•ã›ã‚‹ã“ã¨ã‚’å¤§åˆ‡ã«ã•ã‚Œã¾ã™ã€‚å®ˆã‚ŠãªãŒã‚‰ã‚‚å¼·è¦ã›ãšã€è‡ªç„¶ãªè·é›¢æ„Ÿã§é–¢ä¿‚ã‚’ç¯‰ã‹ã‚Œã‚‹ã‚¿ã‚¤ãƒ—ã§ã™ã€‚æŸ”ã‚‰ã‹ãè½ã¡ç€ã„ãŸæ€§æ ¼ãŒã€ç›¸æ‰‹ã«ç™’ã—ã‚„å®‰ã‚‰ãã‚’æä¾›ã—ã¾ã™ã€‚æƒ…ç†±çš„ãªä¸€ç¬ã‚ˆã‚Šã‚‚ã€é•·ãæš–ã‹ã„é–¢ä¿‚ã«æ†§ã‚Œã¦ã„ã¾ã™ã€‚' },
      'CKGS': { name: 'ã‚·ãƒ£ã‚¤ãƒ©ãƒ ', suit: 'â™ ï¸', emoji: 'ğŸ‘', group: 'KG',
        description: 'æ‹æ„›ã«ãŠã„ã¦éç©æ¥µçš„ã§ã™ãŒã€ãã®æ€§æ ¼ã‚’é¢ç™½ã„ã¨æ„Ÿã˜ã¦ãã‚Œã‚‹äººã‚’å¥½ãã«ãªã‚ŠãŒã¡ã§ã™ã€‚æ‹æ„›ã§ã¯è‡ªåˆ†ã‹ã‚‰è¡Œå‹•ã™ã‚‹ã“ã¨ã¯å°‘ãªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ç›¸æ‰‹ã®å¥½æ„ã‚’æ„Ÿã˜ã‚‹ãŸã³ã«è‡ªèº«ã®æ°—æŒã¡ã«æ°—ã¥ãã€æ„›ã‚’è‚²ã¦ã¦ã„ãã¾ã™ã€‚ãã®ç´”ç²‹ã•ã‚„å®ˆã£ã¦ã‚ã’ãŸããªã‚‹é›°å›²æ°—ãŒã€æ‹æ„›ã«ãŠã„ã¦æ„›ã•ã‚Œã‚‹è¦ç´ ã¨ãªã‚Šã¾ã™ã€‚' }
    };

    // Questions Data
    const questions = [
      // T/C Questions (3)
      { category: 'T/C ã‚¿ã‚¤ãƒ—', text: 'å¤œã®ãƒã‚¸ã‚·ãƒ§ãƒ³ã®é¡˜æœ›ã¯ï¼Ÿ', left: 'æ”»ã‚ãŸã„', right: 'æ”»ã‚ã‚‰ã‚ŒãŸã„', dimension: 'TC' },
      { category: 'T/C ã‚¿ã‚¤ãƒ—', text: 'è‡ªåˆ†ã®å®¹å§¿ã«é–¢ä¿‚ãªãã€ä¸‹ç€å§¿ã«ã¤ã„ã¦å¥½ããªã®ã¯', left: 'è¦‹ã‚‹æ–¹', right: 'è¦‹ã‚‰ã‚Œã‚‹æ–¹', dimension: 'TC' },
      { category: 'T/C ã‚¿ã‚¤ãƒ—', text: 'è‡ªåˆ†ã¯ã©ã£ã¡ï¼Ÿ', left: 'ãƒ‰S', right: 'ãƒ‰M', dimension: 'TC' },
      // P/K Questions (3)
      { category: 'P/K ã‚¿ã‚¤ãƒ—', text: 'æ‹äººã¨ã„ã‚‹æ™‚ã€è·ç‰©ã‚’æŒã¤ã®ã¯ï¼Ÿ', left: 'æŒã£ã¦æ¬²ã—ã„', right: 'æŒã£ã¦ã‚ã’ãŸã„', dimension: 'PK' },
      { category: 'P/K ã‚¿ã‚¤ãƒ—', text: 'æ‹äººã®ç†æƒ³åƒã¯ï¼Ÿ', left: 'å—ã‘æ­¢ã‚ã¦ãã‚Œã‚‹', right: 'é ¼ã£ã¦ãã‚Œã‚‹', dimension: 'PK' },
      { category: 'P/K ã‚¿ã‚¤ãƒ—', text: 'ã€Œå¥½ãã€ã£ã¦è¨€è‘‰ã¯ï¼Ÿ', left: 'è¨€ã‚ã‚ŒãŸã„', right: 'è¨€ã„ãŸã„', dimension: 'PK' },
      // G/L Questions (3)
      { category: 'G/L ã‚¿ã‚¤ãƒ—', text: 'ãƒ•ã‚©ãƒ¼ãƒãƒ«ãªå ´ã§ã®æœè£…ã¯ã©ã£ã¡ã‚’ç€ãŸã„ï¼Ÿ', left: 'ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—', right: 'ãƒ‰ãƒ¬ã‚¹', dimension: 'GL' },
      { category: 'G/L ã‚¿ã‚¤ãƒ—', text: 'ä½“ã®ãƒ©ã‚¤ãƒ³ã‚’å¼·èª¿ã—ãªã„æœã‚’é¸ã³ãŒã¡ï¼Ÿ', left: 'ã¯ã„', right: 'ã„ã„ãˆ', dimension: 'GL' },
      { category: 'G/L ã‚¿ã‚¤ãƒ—', text: 'åˆå¯¾é¢ã§è¨€ã‚ã‚Œã¦ã©ã£ã¡ãŒå¬‰ã—ã„ï¼Ÿ', left: 'ã€Œã‹ã£ã“ã„ã„ã€', right: 'ã€Œã‹ã‚ã„ã„ã€', dimension: 'GL' },
      // O/S Questions (3)
      { category: 'O/S ã‚¿ã‚¤ãƒ—', text: 'è‡ªåˆ†ã®ã‚»ã‚¯ã‚·ãƒ£ãƒªãƒ†ã‚£ã‚’éš ã—ã¦ã„ã¾ã™ã‹ï¼Ÿ', left: 'ã‚ªãƒ¼ãƒ—ãƒ³', right: 'éš ã—ã¦ã„ã‚‹', dimension: 'OS' },
      { category: 'O/S ã‚¿ã‚¤ãƒ—', text: 'è‡ªåˆ†ã«å¯¾ã—ã¦ä»–è€…è©•ä¾¡ãŒæ°—ã«ãªã‚Šã¾ã™ã‹ï¼Ÿ', left: 'æ°—ã«ãªã‚‰ãªã„', right: 'æ°—ã«ãªã‚‹', dimension: 'OS' },
      { category: 'O/S ã‚¿ã‚¤ãƒ—', text: 'æ‹äººã¨ã®é–¢ä¿‚ã‚’å…¬è¡¨ã™ã‚‹ã“ã¨ã«å¾Œã‚ã‚ãŸã•ã‚’æ„Ÿã˜ã¾ã™ã‹ï¼Ÿ', left: 'æ„Ÿã˜ãªã„', right: 'æ„Ÿã˜ã‚‹', dimension: 'OS' }
    ];

    // State
    let currentQuestion = 0;
    let scores = { TC: 0, PK: 0, GL: 0, OS: 0 };
    let resultType = '';

    // Default Config
    const defaultConfig = {
      main_title: 'ğŸ’˜Lã‚­ãƒ£ãƒ©ã‚¿ã‚¤ãƒ—è¨ºæ–­',
      subtitle: '16ã‚¿ã‚¤ãƒ—ã«åˆ†ã‹ã‚Œã‚‹ãƒ¬ã‚ºãƒ“ã‚¢ãƒ³ã®ãŸã‚ã®è¨ºæ–­ãƒ„ãƒ¼ãƒ«',
      start_button_text: 'è¨ºæ–­ã‚’ã¯ã˜ã‚ã‚‹',
      primary_color: '#ff6b9d',
      secondary_color: '#c084fc',
      background_color: '#1a1a2e',
      text_color: '#ffffff',
      accent_color: '#f472b6'
    };

    let config = { ...defaultConfig };

    // Element SDK Integration
    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange: async (newConfig) => {
          config = { ...defaultConfig, ...newConfig };
          applyConfig();
        },
        mapToCapabilities: (cfg) => ({
          recolorables: [
            {
              get: () => cfg.background_color || defaultConfig.background_color,
              set: (v) => { cfg.background_color = v; window.elementSdk.setConfig({ background_color: v }); }
            },
            {
              get: () => cfg.primary_color || defaultConfig.primary_color,
              set: (v) => { cfg.primary_color = v; window.elementSdk.setConfig({ primary_color: v }); }
            },
            {
              get: () => cfg.secondary_color || defaultConfig.secondary_color,
              set: (v) => { cfg.secondary_color = v; window.elementSdk.setConfig({ secondary_color: v }); }
            },
            {
              get: () => cfg.text_color || defaultConfig.text_color,
              set: (v) => { cfg.text_color = v; window.elementSdk.setConfig({ text_color: v }); }
            },
            {
              get: () => cfg.accent_color || defaultConfig.accent_color,
              set: (v) => { cfg.accent_color = v; window.elementSdk.setConfig({ accent_color: v }); }
            }
          ],
          borderables: [],
          fontEditable: undefined,
          fontSizeable: undefined
        }),
        mapToEditPanelValues: (cfg) => new Map([
          ['main_title', cfg.main_title || defaultConfig.main_title],
          ['subtitle', cfg.subtitle || defaultConfig.subtitle],
          ['start_button_text', cfg.start_button_text || defaultConfig.start_button_text]
        ])
      });
    }

    function applyConfig() {
      document.getElementById('main-title').textContent = config.main_title || defaultConfig.main_title;
      document.getElementById('subtitle').textContent = config.subtitle || defaultConfig.subtitle;
      document.getElementById('start-button-text').textContent = config.start_button_text || defaultConfig.start_button_text;
      
      // Apply colors
      const container = document.getElementById('app-container');
      container.style.background = `linear-gradient(135deg, ${config.background_color || defaultConfig.background_color} 0%, #16213e 50%, #0f0f23 100%)`;
      
      document.documentElement.style.setProperty('--primary-color', config.primary_color || defaultConfig.primary_color);
    }

    // Screen Management
    function showScreen(screenId) {
      document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
      const screen = document.getElementById(screenId);
      screen.classList.add('active');
    }

    // Quiz Functions
    function startQuiz() {
      currentQuestion = 0;
      scores = { TC: 0, PK: 0, GL: 0, OS: 0 };
      showScreen('question-screen');
      displayQuestion();
    }

    function displayQuestion() {
      const q = questions[currentQuestion];
      document.getElementById('question-category').textContent = q.category;
      document.getElementById('question-text').textContent = q.text;
      document.getElementById('option-left').textContent = q.left;
      document.getElementById('option-right').textContent = q.right;
      
      // Update progress
      const progress = ((currentQuestion + 1) / questions.length) * 100;
      document.getElementById('progress-text').textContent = `${currentQuestion + 1} / ${questions.length}`;
      document.getElementById('progress-percent').textContent = `${Math.round(progress)}%`;
      document.getElementById('progress-bar').style.width = `${progress}%`;
      
      // Reset button states
      document.querySelectorAll('.answer-btn').forEach(btn => btn.classList.remove('selected'));
    }

    function selectAnswer(value) {
      const q = questions[currentQuestion];
      scores[q.dimension] += value;
      
      // Visual feedback
      const buttons = document.querySelectorAll('.answer-btn');
      buttons.forEach(btn => {
        if (parseInt(btn.dataset.value) === value) {
          btn.classList.add('selected');
        }
      });
      
      // Next question or show result
      setTimeout(() => {
        currentQuestion++;
        if (currentQuestion < questions.length) {
          displayQuestion();
        } else {
          calculateResult();
        }
      }, 300);
    }

    function calculateResult() {
      const t = scores.TC > 0 ? 'T' : 'C';
      const p = scores.PK > 0 ? 'P' : 'K';
      const g = scores.GL > 0 ? 'G' : 'L';
      const o = scores.OS > 0 ? 'O' : 'S';
      
      resultType = t + p + g + o;
      displayResult();
    }

    function displayResult() {
      const type = characterTypes[resultType];
      if (!type) return;
      
      document.getElementById('result-suit').textContent = type.suit;
      document.getElementById('result-code').textContent = resultType;
      document.getElementById('result-name').textContent = type.name;
      document.getElementById('result-emoji').textContent = type.emoji;
      document.getElementById('result-description').textContent = type.description;
      
      // Calculate compatibility
      const matches = calculateCompatibility(resultType);
      
      // Good matches
      if (matches.good.length >= 1) {
        const good1 = characterTypes[matches.good[0]];
        document.getElementById('good-match-1-emoji').textContent = good1.emoji;
        document.getElementById('good-match-1-name').textContent = good1.name;
        document.getElementById('good-match-1-code').textContent = matches.good[0];
      }
      if (matches.good.length >= 2) {
        const good2 = characterTypes[matches.good[1]];
        document.getElementById('good-match-2-emoji').textContent = good2.emoji;
        document.getElementById('good-match-2-name').textContent = good2.name;
        document.getElementById('good-match-2-code').textContent = matches.good[1];
      }
      
      // Bad match
      if (matches.bad.length >= 1) {
        const bad = characterTypes[matches.bad[0]];
        document.getElementById('bad-match-emoji').textContent = bad.emoji;
        document.getElementById('bad-match-name').textContent = bad.name;
        document.getElementById('bad-match-code').textContent = matches.bad[0];
      }
      
      showScreen('result-screen');
    }

    function calculateCompatibility(type) {
      const t = type[0]; // T or C
      const p = type[1]; // P or K
      const g = type[2]; // G or L
      const o = type[3]; // O or S
      
      const allTypes = Object.keys(characterTypes);
      const good = [];
      const bad = [];
      
      for (const otherType of allTypes) {
        if (otherType === type) continue;
        
        const ot = otherType[0];
        const op = otherType[1];
        const og = otherType[2];
        const oo = otherType[3];
        
        let score = 0;
        let badFlags = 0;
        
        // T and C are compatible, T+T or C+C are not
        if ((t === 'T' && ot === 'C') || (t === 'C' && ot === 'T')) {
          score += 2;
        } else {
          badFlags++;
        }
        
        // P+P is bad
        if (p === 'P' && op === 'P') {
          badFlags++;
        }
        
        // P+C is bad
        if ((p === 'P' && ot === 'C') || (op === 'P' && t === 'C')) {
          badFlags++;
        }
        
        // K+K is good
        if (p === 'K' && op === 'K') {
          score += 2;
        }
        
        // G+O same is bad
        if (g === 'G' && o === 'O' && og === 'G' && oo === 'O') {
          badFlags++;
        }
        
        // K+G same is bad
        if (p === 'K' && g === 'G' && op === 'K' && og === 'G') {
          badFlags++;
        }
        
        // TS and CO don't match
        if ((t === 'T' && o === 'S' && ot === 'C' && oo === 'O') ||
            (t === 'C' && o === 'O' && ot === 'T' && oo === 'S')) {
          badFlags++;
        }
        
        if (badFlags === 0 && score >= 2) {
          good.push(otherType);
        } else if (badFlags >= 2) {
          bad.push(otherType);
        }
      }
      
      // For good matches, try to return one G and one L variant
      const goodL = good.filter(t => t[2] === 'L');
      const goodG = good.filter(t => t[2] === 'G');
      const finalGood = [];
      if (goodL.length > 0) finalGood.push(goodL[0]);
      if (goodG.length > 0) finalGood.push(goodG[0]);
      if (finalGood.length < 2 && good.length > finalGood.length) {
        for (const g of good) {
          if (!finalGood.includes(g)) {
            finalGood.push(g);
            if (finalGood.length >= 2) break;
          }
        }
      }
      
      return {
        good: finalGood.slice(0, 2),
        bad: bad.slice(0, 1)
      };
    }

    // Share Functions
    function copyLink() {
      const text = `ğŸ’˜Lã‚­ãƒ£ãƒ©ã‚¿ã‚¤ãƒ—è¨ºæ–­ã®çµæœã¯ã€${characterTypes[resultType].name}ã€‘(${resultType})ã‚¿ã‚¤ãƒ—ã§ã—ãŸï¼`;
      navigator.clipboard.writeText(text).then(() => {
        const btn = event.target.closest('button');
        const originalText = btn.innerHTML;
        btn.innerHTML = 'âœ“ ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼';
        setTimeout(() => { btn.innerHTML = originalText; }, 2000);
      });
    }

    function shareToLine() {
      const text = encodeURIComponent(`ğŸ’˜Lã‚­ãƒ£ãƒ©ã‚¿ã‚¤ãƒ—è¨ºæ–­ã®çµæœã¯ã€${characterTypes[resultType].name}ã€‘(${resultType})ã‚¿ã‚¤ãƒ—ã§ã—ãŸï¼`);
      window.open(`https://line.me/R/msg/text/?${text}`, '_blank', 'noopener,noreferrer');
    }

    function shareToX() {
      const text = encodeURIComponent(`ğŸ’˜Lã‚­ãƒ£ãƒ©ã‚¿ã‚¤ãƒ—è¨ºæ–­ã®çµæœã¯ã€${characterTypes[resultType].name}ã€‘(${resultType})ã‚¿ã‚¤ãƒ—ã§ã—ãŸï¼\n\n#Lã‚­ãƒ£ãƒ©ã‚¿ã‚¤ãƒ—è¨ºæ–­`);
      window.open(`https://twitter.com/intent/tweet?text=${text}`, '_blank', 'noopener,noreferrer');
    }

    function restartQuiz() {
      currentQuestion = 0;
      scores = { TC: 0, PK: 0, GL: 0, OS: 0 };
      resultType = '';
      showScreen('start-screen');
    }

    // Initialize
    applyConfig();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9c9805d272f6d805',t:'MTc3MDM1MzM4NS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>